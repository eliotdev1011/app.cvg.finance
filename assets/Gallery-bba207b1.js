import{aF as se,$ as F,r as o,G as M,e as te,aM as C,j as e,a1 as ae,Y as g,af as le,n as L,aa as D,ac as ne,al as ie,_ as re,a6 as oe}from"./index-614b6d1c.js";import{I as $,a as ce}from"./inputnumber.esm-7912d73a.js";import{E as de}from"./ExpanderBlock-3577170a.js";import{D as me}from"./dropdown.esm-4d742924.js";import{E as xe}from"./ErrorDisplay-8be22464.js";(function(){try{var c=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},i=new Error().stack;i&&(c._sentryDebugIds=c._sentryDebugIds||{},c._sentryDebugIds[i]="b81e6595-310d-4171-9efe-26c0650fba3f",c._sentryDebugIdIdentifier="sentry-dbid-b81e6595-310d-4171-9efe-26c0650fba3f")}catch{}})();const T=se.createContext(null),ue=({children:c})=>{const{getSigner:i,address:d,isWellConnected:p}=F(),[j,f]=o.useState(void 0),{handleTransaction:N,notifyError:b}=o.useContext(M),{ecosystemInfo:B}=o.useContext(te);o.useEffect(()=>{j===void 0&&d&&a().then()},[j,d,p]);const h=l=>{if(!l.id)return"#";switch(l.type){case"STAKING":return`/positions/sdt-staking/${Number(l.id)}`;case"BOND":return`/positions/bond/${Number(l.id)}`;case"LOCKING":return`/positions/lock/${Number(l.id)}`;case"SEED":return`/positions/seed-presale/${Number(l.id)}`;case"WL":return`/positions/wl-presale/${Number(l.id)}`;case"IBO":return`/positions/ibo-presale/${Number(l.id)}`;default:return"#"}},a=()=>new Promise((l,u)=>{C.getAllPositions(d).then(r=>{f(r),l(r)}).catch(r=>{b(r),f({error:!0}),u()})}),I={userData:j,loadUserData:a,transferPosition:async(l,u,r)=>{try{const m=await i();await C.transferNft(m,l,u,r).then(v=>{N(v,()=>{})})}catch(m){b(m)}},lockTimePosition:async(l,u,r)=>{try{const m=await i();await C.lockTimeNft(m,l,u,r).then(v=>{N(v,()=>{})})}catch(m){b(m)}},claimPosition:async(l,u,r)=>{try{const m=await i();await C.claimNft(m,l,u,r).then(v=>{N(v,()=>{})})}catch(m){b(m)}},claimBoost:async(l,u)=>{ae(async()=>await C.claimBoost(await i(),B.boostWlIbo,l,u),null,N,b)},getDetailLink:h};return e.jsx(T.Provider,{value:I,children:c})};function k({children:c,title:i}){return e.jsx(de,{title:i,children:c})}const A=[{code:"LOCKING",name:"Lock"},{code:"STAKING",name:"Staking(StakeDAO)"},{code:"CVXSTAKING",name:"Staking(Convex)"},{code:"BOND",name:"Bonds"},{code:"WL",name:"WL"},{code:"SEED",name:"Seed"},{code:"IBO",name:"IBO"}];function E(){const{getDetailLink:c}=o.useContext(T),[i,d]=o.useState(A[0]),[p,j]=o.useState(void 0);return e.jsxs(g,{children:[e.jsx("div",{className:"text-lg border-bottom-1 border-quiet pb-2 mb-2",children:"Find a position:"}),e.jsxs("div",{className:"flex flex-wrap gap-4 align-items-end",children:[e.jsxs("div",{className:"flex flex-column gap-1",children:[e.jsx("label",{htmlFor:"pos.type",className:"text-sm color-quiet",children:"Type:"}),e.jsx(me,{options:A,className:"input w-15rem",id:"pos.type",optionLabel:"name",value:i,onChange:f=>d(f.value)})]}),e.jsxs("div",{className:"flex flex-column gap-1",children:[e.jsx("label",{htmlFor:"pos.id",className:"text-sm color-quiet",children:"TknId:"}),e.jsx($,{step:1,id:"pos.id",inputClassName:"quiet-input",value:p,onChange:f=>j(f.value)})]}),e.jsx("div",{className:"flex flex-column justify-content-center text-center",children:e.jsxs("a",{className:" flex gap-2 align-items-center color-light-blue use-disabled focus:color-light-blue no-underline p-2 py-3 1",href:c({id:p,type:i?.code}),disabled:!p||!i,children:[e.jsx("i",{className:"pi pi-angle-double-right"})," Go to detail"]})})]})]})}const fe={svg:void 0,manager:void 0,id:void 0,type:void 0,vesting:void 0,isClaimable:void 0,data:void 0};function he(){const{notifyError:c}=o.useContext(M),{userData:i,loadUserData:d,transferPosition:p,lockTimePosition:j,claimPosition:f,claimBoost:N,getDetailLink:b}=o.useContext(T),[B,h]=o.useState(!1),[a,G]=o.useState(fe),[P,_]=o.useState(void 0),[O,I]=o.useState(void 0),[l,u]=o.useState(!1),r=[{code:"transfer",name:"Transfer position"},{code:"lockTime",name:"Timelock"},{code:"link",name:"Link"}],m=a?.data?.presaleInfo?.amountReleasable>0n,v=a?.data?.boostStruct?.claimableBoost>0n;function y(n){h(!0),G(n)}const q=()=>{h(!1)},H=n=>{_(n)},W=n=>{I(n)},K=async()=>{if(!ie(P)){c("enter a valid address");return}await p(P,a.manager,a.id),h(!1),d()},R=async()=>{await j(O,a.manager,a.id),h(!1),d()},V=async()=>{await f(a.vesting,a.type,a.id),h(!1),d()},U=async()=>{await N(a.type,a.id),h(!1),d()},X={code:"claim",name:"Claim position"};let S=r;["SEED","WL","IBO"].indexOf(a.type)!==-1&&(S=r.filter(n=>["transfer","link"].includes(n.code)),S.push(X)),["CVGPEPE"].indexOf(a.type)!==-1&&(S=r.filter(n=>n.code==="transfer"));const w=n=>S.find(t=>t.code===n)===void 0;if(i!==void 0)return["locking","bond","sdtStaking","cvxStaking","presale","pepe"].every(s=>i[s].length===0)?e.jsxs("div",{children:[e.jsx(E,{}),e.jsx(g,{className:" mt-6",children:e.jsx("div",{className:" text-center",children:"No Positions..."})})]}):e.jsxs("div",{children:[e.jsx(E,{}),e.jsxs(g,{className:" mt-6",children:[e.jsx("div",{className:"flex justify-content-end",children:e.jsx("button",{className:"Btn",onClick:()=>u(!l),children:l?"Show All":"Show  Claimable"})}),e.jsx(Y,{data:i.locking}),e.jsx(z,{data:i.bond}),e.jsx(J,{data:i.sdtStaking}),e.jsx(Q,{data:i.cvxStaking}),e.jsx(ee,{data:i.presale}),e.jsx(Z,{data:i.pepe}),e.jsx(le,{header:`${a.type} Position`,visible:B,onHide:q,className:"max-w-2xl mt-5",style:{width:"90vw"},dismissableMask:!0,scrollHeight:"80vh",children:e.jsxs("div",{className:"flex flex-column lg:flex-row mt-5",children:[e.jsx("div",{className:"flex-grow-1 flex-order-1 lg:flex-order-0 my-4 lg:my-0",children:a.svg?e.jsx("div",{className:"w-full",dangerouslySetInnerHTML:{__html:a.svg}}):e.jsx("img",{className:"max-w-25rem col-12",src:a.url})}),e.jsxs("div",{className:"flex-grow-1 pt-0  p-0 lg:ml-4 flex flex-column gap-2 flex-order-0  lg:flex-order-1",children:[e.jsxs("div",{className:"border-gray  p-2 flex flex-column gap-2  ",hidden:w("claim"),children:[e.jsx("span",{className:"block py-2 mb-2  border-bottom-1 text-xl  border-quiet",children:"Claim"}),e.jsx("div",{children:e.jsx("button",{className:"Btn ",disabled:!m,onClick:V,children:"Claim"})}),e.jsx("div",{children:a.type!=="SEED"?e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"Btn ",disabled:!v,onClick:U,children:"Boost"}),"=>"," ",e.jsxs(e.Fragment,{children:["Claimable :"," ",a?.data?.boostStruct?.claimableBoost?L(D(a?.data?.boostStruct?.claimableBoost),!1,2):""," ","| Total claimed :"," ",a?.data?.boostStruct?.totalBoost!==void 0&&a?.data?.boostStruct?.alreadyClaimedBoost!==void 0?L(D(a?.data?.boostStruct?.alreadyClaimedBoost),!1,2)+" / "+L(D(a?.data?.boostStruct?.totalBoost),!1,2):""]})]}):""})]}),e.jsxs("div",{className:"border-gray p-2 flex flex-column gap-2  ",hidden:w("lockTime"),children:[e.jsx("span",{className:"block py-2 mb-2 border-bottom-1 text-xl border-quiet",children:" Timelock "}),e.jsx("label",{htmlFor:"LockTimePosition",className:"col font-bold p-sr-only",children:"Timelock"}),e.jsx("div",{className:"",children:e.jsx($,{id:"LockTimePosition",placeholder:"hours to lock",className:"w-full lg:w-18rem",onChange:s=>W(s.value)})}),e.jsx("div",{className:"",children:e.jsx("button",{className:"Btn ",onClick:R,children:"LockTime"})})]}),e.jsxs("div",{className:"border-gray  p-2 flex flex-column gap-2",hidden:w("transfer"),children:[e.jsx("span",{className:"block py-2 mb-2  border-bottom-1 border-quiet text-xl ",children:" Transfer "}),e.jsx("label",{htmlFor:"transerAddress",className:"col font-bold  p-sr-only",children:"Transfer"}),e.jsx("div",{className:"",children:e.jsx(ce,{id:"transerAddress",className:"w-full lg:w-28rem",placeholder:"address to send",onChange:s=>H(s.target.value)})}),e.jsx("div",{className:"",children:e.jsx("button",{className:"Btn",onClick:K,children:"Transfer"})})]}),e.jsxs("div",{className:"border-gray  p-2 flex flex-column gap-2",hidden:w("link"),children:[e.jsx("span",{className:"block py-2 mb-2  border-bottom-1 border-quiet text-xl ",children:" Link "}),e.jsxs("a",{href:b(a),className:"no-underline flex gap-2 align-items-center color-light-blue",children:[e.jsx("i",{className:"pi pi-angle-double-right"}),"Go to details"]})]})]})]})})]})]});return e.jsxs("div",{children:[e.jsx(E,{}),e.jsx(g,{className:" mt-6",children:e.jsxs("div",{className:" text-center",children:[e.jsx(ne,{}),"Retrieving positions..."]})})]});function Y({data:n}){let s=n;if(l&&(s=s.filter(t=>t.isClaimable)),s.length!==0)return e.jsx(k,{title:"Locking",children:e.jsx("div",{className:"grid",children:s.map((t,x)=>e.jsx("div",{className:"max-w-18rem col-12 cursor-pointer",dangerouslySetInnerHTML:{__html:t.svg},onClick:()=>y(t)},x))})})}function z({data:n}){let s=n;if(l&&(s=s.filter(t=>t.isClaimable)),s.length!==0)return e.jsx(k,{title:"Bond",children:e.jsx("div",{className:"grid",children:s.map((t,x)=>e.jsx("div",{className:"max-w-18rem col-12 cursor-pointer",dangerouslySetInnerHTML:{__html:t.svg},onClick:()=>y(t)},x))})})}function J({data:n}){let s=n;if(l&&(s=s.filter(t=>t.isClaimable)),s.length!==0)return e.jsx(k,{title:"SdtStaking",children:e.jsx("div",{className:"grid",children:s.map((t,x)=>e.jsx("div",{className:"max-w-18rem col-12 cursor-pointer",dangerouslySetInnerHTML:{__html:t.svg},onClick:()=>y(t)},x))})})}function Q({data:n}){let s=n;if(l&&(s=s.filter(t=>t.isClaimable)),s.length!==0)return e.jsx(k,{title:"CvxStaking",children:e.jsx("div",{className:"grid",children:s.map((t,x)=>e.jsx("div",{className:"max-w-18rem col-12 cursor-pointer",dangerouslySetInnerHTML:{__html:t.svg},onClick:()=>y(t)},x))})})}function Z({data:n}){let s=n;if(l&&(s=s.filter(t=>t.isClaimable)),s.length!==0)return e.jsx(k,{title:"CvgPepe",children:e.jsx("div",{className:"grid ",children:n.map((t,x)=>e.jsx(g,{className:" p-1 mr-1 ml-2",children:e.jsx(g,{className:" p-0 ",children:e.jsx("div",{onClick:()=>y(t),children:e.jsx("img",{className:"max-w-15rem col-12 cursor-pointer",src:t.url,alt:`Image ${x}`})})})},x))})})}function ee({data:n}){let s=n;if(l&&(s=s.filter(t=>t.isClaimable)),s.length!==0)return e.jsx(k,{title:"Presale",children:e.jsx("div",{className:"grid ",children:s.map((t,x)=>e.jsx("div",{className:"max-w-18rem col-12 cursor-pointer",dangerouslySetInnerHTML:{__html:t.svg},onClick:()=>y(t)},x))})})}}function ge(){const{isWellConnected:c}=F(),{userData:i}=o.useContext(T);return e.jsx("main",{className:" flex justify-content-center",children:e.jsx(re,{children:d()})});function d(){return c?i?.error?e.jsx(g,{children:e.jsx(xe,{})}):e.jsx(he,{}):e.jsx("div",{className:"my-6",children:e.jsx(g,{children:e.jsx(oe,{})})})}}function ye(){return e.jsx(ue,{children:e.jsx(ge,{})})}export{ye as default};
