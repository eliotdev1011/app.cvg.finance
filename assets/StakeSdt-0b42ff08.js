import{r as a,$ as ie,e as Y,ah as Ue,a0 as je,j as e,W as be,ab as ue,d as G,ai as Te,aj as ae,p as Be,s as Ae,a4 as oe,ak as Se,al as Ge,k as Me,am as We,a7 as _,ad as ce,h as qe,S as fe,n as O,an as _e,a8 as De,G as Pe,Y as de,ao as xe,ac as He,af as Ie,ap as pe,a6 as Ke,_ as Ye}from"./index-614b6d1c.js";import{s as L}from"./staking.stakedao.service-87aa0857.js";import{s as Xe}from"./claim.stakedao.service-b2494336.js";import{E as ze}from"./ErrorDisplay-8be22464.js";import{s as Je}from"./rewards.service-40a9454a.js";import{S as Re,M as re}from"./MaxButton-198646ac.js";import{I as Qe,a as Ze}from"./inputnumber.esm-7912d73a.js";import{D as Le}from"./dropdown.esm-4d742924.js";import{T as ge,S as ee}from"./SortHeader-c05039fc.js";import{C as K,T as es}from"./ContractDisplay-4267b497.js";import{P as ne}from"./ProcessActionButton-77d53bd6.js";import{H as Oe}from"./HourGlassIcon-925d813a.js";import{C as ss}from"./CryptoInput-761efc45.js";import{P as Ve}from"./panel.esm-d8f41b63.js";import{P as ke}from"./ProgressMarker-94cd9f18.js";import{K as te}from"./KeyValueDisplay-ec59a4c2.js";import{P as ts,a as as}from"./PageHelp-3dfbb5e1.js";import{H as he}from"./HeaderInfoPanelContainer-15db6aee.js";import"./CurvePool-852682be.js";import"./stakeDaoUtils-f752dab6.js";import"./ValueConnectedButton-ea3b8760.js";import"./utils-03ca5988.js";(function(){try{var s=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},t=new Error().stack;t&&(s._sentryDebugIds=s._sentryDebugIds||{},s._sentryDebugIds[t]="9ffe9a86-db50-48fd-a192-e6c66ac9daf6",s._sentryDebugIdIdentifier="sentry-dbid-9ffe9a86-db50-48fd-a192-e6c66ac9daf6")}catch{}})();const M=a.createContext(null),ns=({displayFilter:s,children:t})=>{const{address:l,isWellConnected:i}=ie(),{ecosystemInfo:N,cvgPrice:A}=a.useContext(Y),[c,w]=a.useState(void 0),[b,p]=a.useState(void 0),[T,C]=a.useState(void 0),[g,S]=a.useState(void 0),[D,j]=a.useState(void 0),[d,I]=a.useState(void 0),[V,f]=a.useState(void 0),[B,E]=a.useState(!1),[U,x]=a.useState(!1),[m,h]=a.useState(!1);a.useEffect(()=>{c===void 0&&!c?.loading&&z(),T===void 0&&l&&i&&Z(),Ue(A)&&Xe.getTotalClaimable(l,A).then(S),d===void 0&&!d?.loading&&R().then()},[c,T,l,i,A]),a.useEffect(()=>{d!==void 0&&!d?.loading&&!d?.error&&c!==void 0&&!c?.loading&&!c?.isAprMerged&&P()},[d,c]);const R=async()=>{I({loading:!0}),L.getStakeDaoAprs().then(r=>{I({...r})}).catch(r=>{I({error:!0,message:r.message})})},y=(r,o)=>Object.entries(r.details).filter(k=>typeof k[1]=="number").map(([k,F])=>{let W,q;return be[k]?(W=be[k].token,q=`/images/token/${W}.webp`):k===N.cvgToken?(W="CVG",q="/images/token/CVG.webp"):k===N.stakedao.cvgSDT?(W="cvgSDT",q="/images/token/cvgSDT.webp"):k==="APY_FEES"?(W="APY_CURVE",q=o):k==="SDT_PLATFORM_FEES"&&(W="Platform fees",q="/images/token/SDT.webp"),{aprKeyDisplayed:W,logoUrl:q,value:F,percent:F<=0?0:F/r.totalApr*100}}).sort((k,F)=>F.percent-k.percent),P=()=>{!c?.stakings||!c?.stakings?.sdAssets||!c?.stakings?.lps||(Object.values(c.stakings.sdAssets).forEach(r=>{const o=r.gaugeAsset.tokenAddress;r.apr={aprActual:d.actualsApr&&d.actualsApr[o]||0,projectedApr:d.projectedApr&&d.projectedApr[o]||0,boost:d.boostsData&&d.boostsData[o]||0}}),Object.values(c.stakings.lps||{}).forEach(r=>{const o=r.gaugeAsset.tokenAddress;r.apr={aprActual:d.actualsApr&&d.actualsApr[o],projectedApr:d.projectedApr&&d.projectedApr[o],boost:d.boostsData&&d.boostsData[o]}}),c.isAprMerged=!0)},$=async(r,o)=>{let k;if(d.actualsApr[r]){const q=d.actualsApr[r];k=y(q,o.logo)}const F=d.projectedApr[r].totalApr,W=y(d.projectedApr[r],o.logo);f({headerName:o.token,logoHeaderUrl:o.logo,isVisible:!0,aprActual:d.actualsApr[r]?{list:k,total:d.actualsApr[r].totalApr}:void 0,projectedApr:{list:W,total:F},boosts:d.boostsData[r]})},J=async()=>{f(void 0)},H=r=>{w(r),D===void 0&&L.getStakingPrices(r).then(j)},X=a.useMemo(()=>{if(T&&D)return L.processUserTotals(c,T,D)},[T,D]),Q=a.useMemo(()=>{if(!(!c&&!D))return L.processStakingTotals(c,D)},[c,D,T===void 0]);async function Z(){await je(async()=>L.getStakingPositions(l),C)}async function z(){await je(async()=>L.getGlobalData(s),H)}async function se(r){const o=await L.getTvlForaContract(r.type,r.stakingAddress);if(r?.type==="cvgSdt"){const F={...c.cvgSdt};F.nextTotal=o,c.cvgSdt=F,w({...c});return}const k=F=>{const W=F[r.stakingAddress];if(W){const q={...W};q.nextTotal=o,F[r.stakingAddress]=q,w({...c})}};r?.type==="sd"&&k(c?.stakings?.sdAssets),r?.type==="lp"&&k(c?.stakings?.lps)}async function v(){C(void 0)}function n(r,o){h(o),x(r),E(!0)}const u={globalData:c,userStakingData:T,reloadUserStakingData:v,updateGlobalDataAfterAction:se,filter:b,setFilter:p,userTotals:X,stakingTotals:Q,userClaimable:g,closeAprPopup:J,aprDialogData:V,setAprsDataInDialog:$,aprsData:d,streamDialogVisible:B,openStreamDialog:n,setStreamDialogVisible:E,isRewardProcessed:U,isRewardStreamed:m,displayFilter:s};return e.jsx(M.Provider,{value:u,children:t})},Fe=(s,t,l,i,[N,A])=>{const c=s[t],w=c?Object.entries(c).map(([p,T])=>({code:p,label:p,token:l?.token,amount:ue(T?.nextToken,l?.decimals),amountRaw:G(T?.nextToken,l?.decimals),amountBig:T?.nextToken})):[],b=[i,...w];if(N?.code!==0)A(b.find(p=>p.code===N?.code));else{const p=b.reduce((T,C)=>T.amountRaw>C.amountRaw?T:C,b[0]);A(p)}return b},ve=a.createContext(null),Ne={code:0},ls=({cvgTokenData:s,children:t})=>{const{userStakingData:l,reloadUserStakingData:i,updateGlobalDataAfterAction:N}=a.useContext(M),{doApprove:A}=a.useContext(Te),{address:c,getSigner:w,isWellConnected:b}=ie(),[p,T]=a.useState(Ne),[C,g]=a.useState(void 0),[S,D]=a.useState(void 0),[j,d]=a.useState(void 0),{aprsData:I}=a.useContext(M),{ecosystemInfo:V}=a.useContext(Y);a.useEffect(()=>{s&&S===void 0&&c&&b&&y().then(D),s&&C===void 0&&R().then(g)},[s,c,l===void 0,b]);const f=a.useMemo(P,[l,s]);async function B(){D(void 0),i(),N(s)}const E=a.useMemo(()=>{const n=[];if(j||n.push("No amount"),S){const u=S.mainAsset;if(u){const r=G(u.balanceOf,18);j>r&&n.push("Not enough balance")}}return{active:n.length===0,errors:n}},[S,j]),U=a.useMemo(()=>{const n=[];if(j||n.push("No amount."),S){const u=S[S.mainAsset];if(u){const r=G(u.balanceOf,18);j>r&&n.push("Not enough balance.")}}return{active:n.length===0,errors:n}},[S,j]),x=a.useMemo(()=>{const n=[];if(j||n.push("No amount."),p.code&&l&&l[s?.cvgAssetStaking]){const u=l&&l[s?.cvgAssetStaking][p.code];if(u){const r=G(u.nextToken,18);j>r&&n.push("There's not as much amount on your position.")}else n.push("No selected positions.")}else n.push("No selected positions.");return{active:n.length===0,errors:n}},[S,j,p]),m=a.useMemo(()=>{const n=[];if(j||n.push("No amount."),S){const u=S.cvgAsset;if(u){const r=G(u.balanceOf,18);j>r&&n.push("Not enough balance.")}}return{active:n.length===0,errors:n}},[S,j]),h=a.useMemo(()=>{if(!I||I?.loading||I?.error)return{};const n=I?.projectedApr,u=n&&n[V.stakedao.cvgSDT]?ae(n[V.stakedao.cvgSDT].totalApr):"-",r=I?.actualsApr,o=r&&r[V.stakedao.cvgSDT]?ae(r[V.stakedao.cvgSDT].totalApr):"-";return{totalProjectedApr:u,totalActualApr:o}},[I]);async function R(){const n=[Je.getRootFees(),L.getVeSdtInfo(),L.getCvgSvgSdtRatio(Be("15000"),!0),L.getCvgSdtTotalSupply()],[u,r,o,k]=await Promise.all(n);return{rootFee:Number(u)/1e3,veSdtInfo:r,cvgSdtRatio:o,cvgSdtStacked:G(s?.nextTotal,18),cvgSdtTotalSupply:G(k,18)}}async function y(){const n=await Ae.getStaticData(),[u,r]=await Promise.all([await oe.refreshTokenInfos(c,{token:s?.cvgAsset?.address,contract:s?.cvgAssetStaking}),await oe.refreshTokenInfos(c,{token:s?.mainAsset?.address,contract:[s?.cvgAsset?.address,n.stakedao.sdtUtilities]})]),o=u?.allowance[s?.cvgAssetStaking],k=r?.allowance[s?.cvgAsset?.address],F=r?.allowance[n.stakedao.sdtUtilities];return{cvgAsset:u,mainAsset:r,stakingAllowance:o,convertAllowance:k,convertAndStakeAllowance:F}}function P(){if(!(!l||l?.loading||l?.error||!s))return Fe(l,s.cvgAssetStaking,s.cvgAsset,Ne,[p,T])}async function $(n){return await(async()=>{const r=await w(),o=H(S?.mainAsset,n);return await L.doConvert(c,o,r)})()}async function J(n){return await(async()=>{const r=await w(),o=Se(n?.toString(),s?.cvgAsset?.decimals);return L.doUnStake(p.code,s?.cvgAssetStaking,o,r)})()}function H(n,u){let r;const o=u/G(n?.balanceOf,18);return o>.99&&o<1.01?r=n?.balanceOf:r=Se(u?.toString(),18),r}async function X(n){const u=H(S?.cvgAsset,n);return await(async()=>{const o=await w();return L.doStakeGauge(p.code,s?.cvgAssetStaking,u,o)})()}async function Q(n){const u=H(S?.mainAsset,n);return await(async()=>{const o=await w();return L.doConvertAndStake(p.code,u,o)})()}const v={doApproveCvgAssetStaking:()=>{A(s?.cvgAsset?.address,s?.cvgAssetStaking).then(()=>{D(void 0)})},doApproveCvgAssetConvert:()=>{A(s?.mainAsset?.address,s?.cvgAsset?.address).then(()=>{D(void 0)})},doApproveCvgAssetConvertAndStake:async()=>{const n=await Ae.getStaticData();A(s?.mainAsset?.address,n.stakedao.sdtUtilities).then(()=>{D(void 0)})},walletInfo:S,doConvert:$,doStake:X,doUnStake:J,doConvertAndStake:Q,optionsPos:f,selectedPos:p,setSelectedPos:T,tabData:C,resetViewData:B,value:j,setValue:d,isConvertActive:E,isConvertAndStakeActive:U,isUnStakeActive:x,isStakeActive:m,cvgSDTAprs:h};return e.jsx(ve.Provider,{value:v,children:t})},me=a.createContext(null),rs=({stakings:s,utilities:t,children:l})=>{const{userTotals:i,stakingTotals:N,userClaimable:A}=a.useContext(M),[c,w]=a.useState(void 0),[b,p]=a.useState({keyword:void 0,sort:void 0,sortDirection:void 0}),[T,C]=a.useState(!1),{address:g,isWellConnected:S}=ie();a.useEffect(()=>{s&&!s.loading&&c===void 0&&g&&S&&B().then(),N&&N.isInit&&!T&&(p({keyword:void 0,sort:"tvl",sortDirection:"-1"}),C(!0))},[c,s,S,g,N]);const D=(x,m)=>{if(!["sort","keyword"].includes(x))return;const h={...b||{},[x]:m};x==="sort"&&(b&&b.sort===h.sort?h.sortDirection*=-1:h.sortDirection=1),p(h)},j=a.useMemo(()=>{if(!b?.sort&&!b?.keyword||!s||s?.loading||s?.error)return s;let x=()=>!0;b?.keyword&&(Ge(b.keyword)?x=L.filterListByAddress(b.keyword):x=L.filterListByTokenName(b.keyword));let m=()=>0;b?.sort&&(m=L.sortList(b?.sort,b?.sortDirection));const h=R=>Object.values(R).map(P=>({...P,tvl:N?.contracts[P.stakingAddress],userDeposit:i?.contracts[P.stakingAddress],userClaimable:A?.contracts?A?.contracts[P.stakingAddress]:0})).filter(x).sort(m).reduce((P,$)=>(P[$.stakingAddress]=$,P),{});return{sdAssets:h(s.sdAssets),lps:h(s.lps)}},[b,s]),d=(x,m)=>h=>({tokenAddress:x,stakingAddress:m,balanceOf:h.balanceOf,stakingAllowance:h.allowance[m],stakeAllowanceAddress:m,allowance:h.allowance}),I=(x,m)=>{const h=[];return h.push({token:m?.lpAsset?.tokenAddress,contract:t,asset:m?.lpAsset}),h.push({token:m?.gaugeAsset?.tokenAddress,contract:x,asset:m?.gaugeAsset}),h},V=(x,m)=>{const h=[];return h.push({token:m?.asset?.tokenAddress,contract:t,asset:m?.asset}),h.push({token:m?.sdAsset?.tokenAddress,contract:t,asset:m?.sdAsset}),h.push({token:m?.gaugeAsset?.tokenAddress,contract:x,asset:m?.gaugeAsset}),h},f=async(x,m)=>await oe.refreshTokenInfos(g,{token:x,contract:m});async function B(){let x=[];Object.keys(s.lps).forEach(R=>{x=[...x,...I(R,s.lps[R])]}),Object.keys(s.sdAssets).forEach(R=>{x=[...x,...V(R,s.sdAssets[R])]});const m=await oe.getTokenInfos(g,x),h=[];Object.entries(m).forEach(([R,y])=>{const P=x?.find($=>$?.token===R);P&&h.push(d(P.asset.tokenAddress,P.contract)(y))}),w(h)}const U={walletInfo:c,stakings:s,StakingsDisplayList:j,refreshWallet:async x=>{const m=c.find($=>$.tokenAddress===x),h=await f(x,m.stakeAllowanceAddress),R=d(x,m.stakeAllowanceAddress)(h),y=[...c],P=y.find($=>$.tokenAddress===x);y.splice(y.indexOf(P),1,R),w(y)},utilities:t,updateFilter:D,filter:b};return e.jsx(me.Provider,{value:U,children:l})},le=a.createContext(null),we={code:0},Ce=({stakingData:s,type:t,children:l})=>{const{userStakingData:i,reloadUserStakingData:N,updateGlobalDataAfterAction:A}=a.useContext(M),[c,w]=a.useState(void 0),[b]=a.useState(5n),[p,T]=a.useState(1),{walletInfo:C,refreshWallet:g}=a.useContext(me),{doApprove:S}=a.useContext(Te),{getSigner:D}=ie(),[j,d]=a.useState(we),[I,V]=a.useState(!1),[f,B]=a.useState(void 0),E=a.useMemo(P,[i]),U=a.useMemo(()=>s?.mainAsset?.logo||Me,[]),x=a.useMemo(()=>C?.find(v=>v.stakingAddress===s?.stakingAddress),[C]),[m,h]=a.useState(void 0),R=a.useMemo(()=>H(),[C]);a.useEffect(()=>{if(s!==void 0){const v=We.find(n=>n.name===s?.stakingName)?.rewards||[];oe.getErc20INfoMultiple(v).then(n=>{w(n)})}},[s]),a.useEffect(()=>{if(!s?.pool||!f||!m||m?.tokenAddress!==s?.asset.tokenAddress){T({raw:0n,display:0});return}L.getDy(s?.pool,f).then(v=>{const n=v-v*b/10000n;T({raw:n,display:G(n,s?.asset?.decimals)})})},[f,b,m]);const y=()=>({...C?.find(n=>n?.tokenAddress===m?.tokenAddress),name:m?.name,...m});function P(){if(!(!i||i?.loading))return Fe(i,s.stakingAddress,s.gaugeAsset,we,[j,d])}const $=a.useMemo(()=>{const v=[];if(j?.code===0&&v.push("No selected position."),(!f||f===0n)&&v.push("No unstake amount."),j.code&&i&&i[s?.cvgAssetStaking]){const n=i[s?.stakingAddress]&&i[s?.stakingAddress][j.code];if(n){const u=n.nextToken;f>u&&v.push("There's not as much amount on your position.")}}return{active:v.length===0,errors:v}},[f,C,m,j]),J=a.useMemo(()=>{const v=y(),n=[];if(f||n.push("No amount."),C||f===0n){const u=v?.balanceOf;f>u&&n.push("Not enough balance.")}return{active:n.length===0,errors:n}},[f,C,m]);function H(){const v=r=>!C||C?.loading?0n:C?.find(o=>o?.tokenAddress===r?.tokenAddress)?.balanceOf||0n,n=[];s?.asset?.tokenAddress&&n.push({name:s?.asset?.token,tokenAddress:s?.asset?.tokenAddress,code:s?.asset?.token,amount:v(s?.asset),decimals:s?.asset?.decimals}),s?.sdAsset?.tokenAddress&&n.push({name:s?.sdAsset?.token,tokenAddress:s?.sdAsset?.tokenAddress,code:s?.sdAsset?.token,amount:v(s?.sdAsset),decimals:s?.sdAsset?.decimals}),s?.lpAsset?.tokenAddress&&n.push({name:s?.lpAsset?.token,tokenAddress:s?.lpAsset?.tokenAddress,code:s?.lpAsset?.token,amount:v(s?.lpAsset),decimals:s?.lpAsset?.decimals}),s?.gaugeAsset?.tokenAddress&&n.push({name:s?.gaugeAsset?.token,tokenAddress:s?.gaugeAsset?.tokenAddress,code:s?.gaugeAsset?.token,amount:v(s?.gaugeAsset),decimals:s?.gaugeAsset?.decimals});const u=n.find(r=>r.code===m?.code)||n[0];return h(u),n}async function X(v,n){g(v),N(),A(n)}const Q=()=>{const v=y(),n=C.find(u=>u.tokenAddress===v.tokenAddress);S(v.tokenAddress,n.stakeAllowanceAddress).then(()=>{g(v.tokenAddress)})},Z=async v=>{const n=y(),u=await D();return await(n.tokenAddress===s?.gaugeAsset?.tokenAddress?async()=>L.doStakeGauge(j.code,s.stakingAddress,v,u):async()=>{let o;return t==="sd"?(o=n.tokenAddress===s?.asset?.tokenAddress?"asset":null,o=!o&&n.tokenAddress===s?.sdAsset?.tokenAddress?"sd":o,o=!o&&n.tokenAddress===s?.gaugeAsset?.tokenAddress?"gauge":o):(o=n.tokenAddress===s?.gaugeAsset?.tokenAddress?"gauge":o,o=!o&&n.tokenAddress===s?.lpAsset?.tokenAddress?"lp":o),L.doStakeWithSdtUtilities(t,o,j.code,s.stakingAddress,v,p?.raw,u)})()};async function z(v){return await(async()=>{const u=await D();return L.doUnStake(j.code,s.stakingAddress,v,u)})()}const se={stakingData:s,logoToken:U,isExpanded:I,setIsExpanded:V,optionsPos:E,selectedPos:j,setSelectedPos:d,doApproveStaking:Q,walletInfoStaking:x,type:t,doUnStake:z,doStake:Z,stakingAssetSelected:m,setStakingAssetSelected:h,assetList:R,getSelectedAssetInfo:y,rewards:c,resetViewData:X,isStakingActive:J,isUnstakingActive:$,minToken:p,weiValue:f,setWeiValue:B};return e.jsx(le.Provider,{value:se,children:l})};function os({staking:s}){const{rewards:t}=a.useContext(le);if(!s)return e.jsx(_,{className:"w-full h-4rem"});const l=()=>s?.mainAsset?.token==="BAL"?"80WETH-20BAL LP token":s?.mainAsset?.token;return e.jsx("div",{className:"h-full  flex-wrap flex  align-content-center",children:e.jsxs("div",{children:[e.jsxs("div",{children:["Deposit ",l(),", sd",s?.mainAsset?.token," or ",s?.gaugeAsset?.token," (Stake DAO gauge receipt token) to earn boosted rewards plus CVG emissions. If your funds are already deposited on Stake DAO, it is not needed to withdraw before entering this pool."]}),e.jsxs("div",{className:"mt-3",children:[e.jsx("span",{className:"color-tonic",children:"Rewards:"}),e.jsxs("div",{className:"flex flex-wrap gap-2  mt-1 ",children:[t&&t.map(({token:i,logo:N})=>e.jsxs("div",{className:"flex gap-2  align-items-center",children:[e.jsx("img",{alt:i,className:"h-2rem h-auto",src:N}),e.jsx("span",{children:i})]},i)),e.jsxs("div",{className:"flex gap-2  align-items-center",children:[e.jsx("img",{alt:"cvg",className:"h-2rem h-auto",src:ce}),e.jsx("span",{children:"CVG"})]})]})]})]})})}function is({staking:s}){const{ecosystemInfo:t}=a.useContext(Y);return s?e.jsx("div",{className:"h-full  flex-wrap flex  align-content-center pt-1",children:e.jsx("div",{children:e.jsxs("div",{className:"flex flex-wrap   align-content-center gap-3",children:[e.jsx(K,{className:"flex-basis-45",len:8,contract:{address:s?.sdAsset?.tokenAddress,name:`sd${s.stakingName}`}}),e.jsx(K,{className:"flex-basis-45",len:8,contract:{address:s?.gaugeAsset?.tokenAddress,name:`sd${s?.stakingName}-gauge`}}),e.jsx(K,{className:"flex-basis-45",len:8,contract:{address:s?.stakingAddress,name:`sd${s?.stakingName} Staking`}}),e.jsx(K,{className:"flex-basis-45",len:8,contract:{address:t?.stakedao?.sdtBlackHole,name:"Black Hole"}})]})})}):e.jsx(_,{className:"w-full h-4rem"})}function cs({staking:s}){const{ecosystemInfo:t}=a.useContext(Y);return s?e.jsx("div",{className:"h-full  flex-wrap flex  align-content-center pt-1",children:e.jsx("div",{children:e.jsxs("div",{className:"flex flex-wrap  align-content-center  gap-3 ",children:[e.jsx(K,{className:"flex-basis-45",len:8,contract:{address:s?.lpAsset?.tokenAddress,name:s?.lpAsset?.token}}),e.jsx(K,{className:"flex-basis-45",len:8,contract:{address:s?.gaugeAsset?.tokenAddress,name:s?.gaugeAsset?.token}}),e.jsx(K,{className:"flex-basis-45",len:8,contract:{address:s?.stakingAddress,name:`${s?.lpAsset?.token} staking`}}),e.jsx(K,{className:"flex-basis-45",len:8,contract:{address:t?.stakedao?.sdtBlackHole,name:"Black Hole"}})]})})}):e.jsx(_,{className:"w-full h-4rem"})}function ds({staking:s}){const{rewards:t}=a.useContext(le);return s?e.jsx("div",{className:"h-full  flex-wrap flex  align-content-center ",children:e.jsxs("div",{children:[e.jsxs("div",{children:["Deposit ",e.jsx("span",{children:s?.stakingName})," LP token to earn boosted CRV and SDT rewards, plus CVG emissions. If your funds are already deposited on Stake DAO, it is not needed to withdraw before entering this pool."]}),e.jsxs("div",{className:"mt-3",children:[e.jsx("span",{className:"color-tonic",children:"Rewards:"}),e.jsxs("div",{className:"flex gap-5 mt-1 ",children:[t&&t.map(({token:l,logo:i})=>e.jsxs("div",{className:"flex gap-2  align-items-center",children:[e.jsx("img",{alt:l,className:"h-2rem h-auto",src:i}),e.jsx("span",{children:l})]},l)),e.jsxs("div",{className:"flex gap-2  align-items-center",children:[e.jsx("img",{alt:"cvg",className:"h-2rem h-auto",src:qe}),e.jsx("span",{children:"CRV"})]}),e.jsxs("div",{className:"flex gap-2  align-items-center",children:[e.jsx("img",{alt:"cvg",className:"h-2rem h-auto",src:fe}),e.jsx("span",{children:"SDT"})]}),e.jsxs("div",{className:"flex gap-2  align-items-center",children:[e.jsx("img",{alt:"cvg",className:"h-2rem h-auto",src:ce}),e.jsx("span",{children:"CVG"})]})]})]})]})}):e.jsx(_,{className:"w-full h-4rem"})}function ms(){const{ecosystemInfo:s}=a.useContext(Y),t=[{address:s?.stakedao?.cvgSDT,name:"cvgSDT"},{address:s?.stakedao?.sdtVeSdt,name:"veSDT"},{address:s?.stakedao?.veSdtMultisig,name:"Locker"},{address:s?.stakedao?.cvgSdtStaking,name:"Staking"}];return e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex flex-wrap  h-full align-content-center gap-3 ",children:t.map(l=>e.jsx(K,{nameCss:"text-white",className:"flex-basis-45",len:8,addressCss:"color-quiet",contract:{address:l.address,name:l.name}},l.name))})})}function xs(){return e.jsx("div",{className:"h-full  flex-wrap flex  align-content-center",children:e.jsxs("div",{children:["Convert SDT to cvgSDT. Staked cvgSDT earns native veSDT rewards (sdFRAX3Crv),"," ","10% of platform fees distributed as SDT, plus CVG emissions. On top of that, a treasury boost is provided and distributed as SDT or cvgSDT.",e.jsx("br",{}),e.jsx("br",{}),"Converting SDT to cvgSDT is irreversible. ",e.jsx("br",{}),"If you wish to exit your cvgSDT position, a cvgSDT/SDT Curve Pool has been deployed:"," ",e.jsxs("a",{href:"https://curve.fi/#/ethereum/pools/factory-stable-ng-81/swap",className:"color-light-blue",rel:"noreferrer",target:"_blank",children:[e.jsx("i",{className:"pi pi-external-link"})," cvgSDT/SDT Curve Pool"]})]})})}function us(){const{tabData:s}=a.useContext(ve),t=a.useMemo(()=>{if(s)return{...s,owned:s.balance||0,ownedShare:s?.veSdtInfo?.veSdtInfo?.balance/s.veSdtInfo?.totalSupply*100||void 0,delegated:s.veSdtInfo?.delegated||0,delegatedShare:s.balance>0?s.veSdtInfo?.delegated/s.veSdtInfo?.balance*100:void 0,cvgSdtStakeShare:s.cvgSdtTotalSupply===0?0:s.cvgSdtStacked/s.cvgSdtTotalSupply*100}},[s]);return e.jsxs("div",{className:"flex flex-column gap-2 h-full justify-content-center",children:[e.jsxs("div",{className:"flex gap-1 align-items-center",children:[e.jsx("span",{className:"w-10rem",children:" cvgSDT staked: "}),e.jsxs("span",{className:"text-white info-block py-1",children:[O(t?.cvgSdtStacked)," ",t?.cvgSdtStakeShare&&e.jsxs(e.Fragment,{children:[" (",O(t?.cvgSdtStakeShare,!1,2),"%)"]})]})]}),e.jsxs("div",{className:"flex gap-1 align-items-center",children:[e.jsx("span",{className:"w-10rem",children:"cvgSDT peg:"}),e.jsxs("span",{className:"text-white info-block py-1",children:[" ",((1+1-t?.cvgSdtRatio)*100).toFixed(2),"%"]})]})]})}function ps(){return e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex flex-wrap  h-full align-content-center gap-3 ",children:e.jsxs("div",{className:"flex flex-column gap-2  mt-1 ",children:[e.jsx("span",{className:"color-tonic",children:"Rewards:"}),e.jsxs("div",{className:"flex gap-5 mt-1 ",children:[e.jsxs("div",{className:"flex gap-2  align-items-center",children:[e.jsx("img",{alt:"cvg",className:"h-2rem h-auto",src:_e}),e.jsx("span",{children:"sdFRAX3Crv"})]}),e.jsxs("div",{className:"flex gap-2  align-items-center",children:[e.jsx("img",{alt:"cvg",className:"h-2rem h-auto",src:De}),e.jsx("span",{children:"cvgSDT"})]}),e.jsxs("div",{className:"flex gap-2  align-items-center",children:[e.jsx("img",{alt:"cvg",className:"h-2rem h-auto",src:fe}),e.jsx("span",{children:"SDT"})]}),e.jsxs("div",{className:"flex gap-2  align-items-center",children:[e.jsx("img",{alt:"cvg",className:"h-2rem h-auto",src:ce}),e.jsx("span",{children:"CVG"})]})]})]})})})}const gs={sd:["About","Contracts"],lp:["About","Contracts"],cvgSdt:["About","Contracts","Info","Rewards"]};function $e({type:s,staking:t}){function l(N,A){switch(N){case"sd":switch(A){case"About":return e.jsx(os,{staking:t});case"Contracts":return e.jsx(is,{staking:t})}break;case"lp":switch(A){case"Contracts":return e.jsx(cs,{staking:t});case"About":return e.jsx(ds,{staking:t})}break;case"cvgSdt":switch(A){case"About":return e.jsx(xs,{staking:t});case"Contracts":return e.jsx(ms,{staking:t});case"Info":return e.jsx(us,{staking:t});case"Rewards":return e.jsx(ps,{staking:t})}}}const i=gs[s];return e.jsx("div",{className:" mt-5 xl:mt-0   ",children:e.jsx(es,{tabs:i,className:"color-quiet",cssContent:"xl:h-10rem overflow-auto text-gray text-left ",children:i.map((N,A)=>e.jsx("div",{className:"h-full ",children:l(s,N)},A))})})}function fs({mainAsset:s,cvgAsset:t}){const{notifyError:l}=a.useContext(Pe),{walletInfo:i,doConvert:N,doStake:A,doUnStake:c,doConvertAndStake:w,optionsPos:b,selectedPos:p,setSelectedPos:T,resetViewData:C,value:g,setValue:S,isConvertActive:D,isConvertAndStakeActive:j,isUnStakeActive:d,isStakeActive:I,cvgSDTAprs:V}=a.useContext(ve),{ecosystemInfo:f,actualCycle:B}=a.useContext(Y),{userTotals:E,stakingTotals:U,userClaimable:x,setAprsDataInDialog:m}=a.useContext(M),h=V?.totalProjectedApr||"-",R=V?.totalActualApr||"-",y=a.useMemo(()=>[{name:t?.token,code:t?.token},{name:` ${s?.token} `,code:s?.token}],[t,s]),[P,$]=a.useState(y[0]),J=k=>{$(k),S(void 0)},H=ue(i?.mainAsset?.balanceOf),X=G(i?.mainAsset?.balanceOf||0n,s?.decimals),Q=ue(i?.cvgAsset?.balanceOf),Z=G(i?.cvgAsset?.balanceOf||0n,t?.decimals);let z=0;p?.code!==0&&(z=b?.find(F=>F.code===p?.code)?.amountRaw||0);function se(){if(g<=0){l("Invalid amount");return}return A(g).then()}function v(){if(g<=0){l("Invalid amount");return}return c(g).then()}function n(){if(g<=0){l("Invalid amount");return}return w(g).then()}function u(){if(!g){l("Please enter a valid amount");return}return N(g)}const r=k=>e.jsxs("div",{className:"flex flex-column align-items-start p-1 px-2 gap-1",children:[e.jsx("div",{children:k.name}),e.jsxs("span",{className:`text-xs ${k.amount===0n?"inactive":""}`,children:["Av.: ",k.code==="SDT"?H:Q]})]}),o=()=>e.jsxs("a",{href:"https://swap.defillama.com/?chain=ethereum&from=0x0000000000000000000000000000000000000000&to=0x73968b9a57c6e53d41345fd57a6e6ae27d6cdb2f",target:"_blank",rel:"noreferrer",className:"p-2 no-underline color-tonic border-tonic border-1 inline-flex align-items-center gap-2",children:[e.jsx("i",{className:"pi pi-caret-right"}),"Buy on Defillama"]});return e.jsx(de,{className:"mb-6",children:e.jsxs("div",{className:"grid",children:[e.jsxs("div",{className:"col-12 flex gap-2 flex-column md:flex-row justify-content-between align-items-start mb-2",children:[e.jsxs("div",{className:"flex align-items-center w-fit gap-2",children:[e.jsx("img",{src:`/images/token/${t?.token}.webp`,className:" flex-grow-0 w-3rem h-3rem  sm:block",alt:`${t?.token} logo`}),e.jsxs("div",{className:" text-xl ",children:[t?.token," staking"]})]}),e.jsxs("span",{className:"flex flex-column flex-wrap hidden gap-1  xl:flex",children:[e.jsxs("span",{className:"flex gap-1",children:[e.jsx("span",{className:"color-tonic",children:"Deposits: "}),e.jsxs("span",{className:"text-sm",children:["$",O(E?.cvgSdt.amount)]})]}),e.jsxs("span",{className:"w-fit bg-blue text-xs white-space-nowrap inline-block p-1 color-light-blue",children:[E?.cvgSdt.count||"0"," Position(s)"]})]}),e.jsxs("span",{className:"hidden xl:inline",children:[e.jsx("span",{className:"color-tonic",children:"Claimable :"}),e.jsxs("span",{className:"text-sm",children:[" $",O(x?.cvgSdt?.claimable)," "]})]}),e.jsxs("div",{className:"Panel-apr w-fit",children:["TVL: ",e.jsx("span",{className:"text-sm",children:U&&`$${O(U?.cvgSdt?.tvl,!1,0)}`||"-"})]}),e.jsxs("div",{className:"flex gap-2 align-items-center",children:[e.jsx("span",{className:" inline-block mx-1 color-tonic  lg:hidden",children:"Apr:"}),B>2n&&e.jsxs("div",{className:"flex flex-column",children:[e.jsx("div",{className:"p-2 text-sm bg-apr text-center",children:R+"%"}),e.jsxs("div",{className:"pt-2 text-xs text-center",children:["Proj: ",h+"%"," "]})]})||e.jsxs("div",{className:"p-2 bg-blue text-center",children:[" ",h+"%"," "]}),e.jsx("i",{onClick:()=>{m(t.address,{...t,logo:`/images/token/${t?.token}.webp`})},className:"pi pi-info-circle ml-2 color-tonic cursor-pointer"})]})]}),e.jsxs("div",{className:"xl:col-6  col-12  ",children:[e.jsxs("div",{className:"  md:text-left",children:[e.jsxs("div",{className:" flex-column gap-3  flex align-items-start",children:[e.jsx(Re,{unselectable:!1,className:"inline-block massive",optionLabel:"name",value:P,itemTemplate:r,options:y,onChange:k=>J(k.value)}),e.jsx("div",{className:"flex  flex-wrap gap-2"})]}),e.jsx("div",{className:"flex  gap-1 ",hidden:P?.code!==s?.token,children:e.jsx(re,{className:"m-0",setValue:()=>{S(X)},available:X})}),e.jsxs("div",{hidden:P?.code!==t?.token,className:"flex  gap-1 ",children:[e.jsx(re,{className:"m-0",label:"max(stake)",setValue:()=>{S(Z)},available:Z}),e.jsx(re,{className:"m-0",label:"max(unstake)",setValue:()=>{S(z)},available:z})]}),e.jsxs("div",{className:"inline-flex flex-column md:flex-row align-items-start gap-1",children:[e.jsx("div",{children:e.jsx(Qe,{className:"appearance-none md:min-w-20rem md:mb-0 min-w-15rem",value:g,onChange:k=>{S(k.value)},mode:"decimal",placeholder:"Enter amount.",minFractionDigits:2,maxFractionDigits:10,locale:"en-US"})}),e.jsx(Le,{itemTemplate:ge,valueTemplate:ge,className:"input w-12rem no-padding  ",value:p,disabled:!b?.length,options:b,onChange:k=>{T(k.value)},optionLabel:"name",placeholder:"Select an NFT"})]})]}),e.jsxs("div",{className:"mt-2",children:[e.jsxs("div",{hidden:P?.code!==t?.token,children:[e.jsx(ne,{processKey:"staking.depositCvgSdt",value:g,valueRaw:xe(g,18),disabled:!I?.active,errors:I?.errors,label:"Stake",params:{asset:"cvgSDT",tokenId:p?.code,cycle:Number(B)+2},perform:se,allowanceDefinition:{contract:f.stakedao.cvgSdtStaking,token:{tokenAddress:f.stakedao.cvgSDT,name:"cvgSDT"}},afterPerform:C}),e.jsx(ne,{processKey:"staking.withdrawCvgSdt",value:g,valueRaw:xe(g,18),disabled:!d?.active,errors:d?.errors,label:"Unstake",params:{asset:"cvgSDT",tokenId:p?.code},perform:v,afterPerform:C}),e.jsx(o,{})]}),e.jsxs("div",{hidden:P?.code!==s?.token,children:[e.jsx(ne,{processKey:"staking.convertCvgSdt",value:g,valueRaw:xe(g,18),disabled:!D?.active,errors:D?.errors,label:"Convert",params:{asset:"SDT"},perform:u,allowanceDefinition:{contract:f.stakedao.cvgSDT,token:{tokenAddress:f.stakedao.sdt,name:"SDT"}},afterPerform:C}),e.jsx(ne,{processKey:"staking.convertAndDepositCvgSdt",value:g,valueRaw:xe(g,18),disabled:!j?.active,errors:j?.errors,label:"Convert & Stake",params:{asset:"SDT",tokenId:p?.code,cycle:Number(B)+2},perform:n,allowanceDefinition:{contract:f.stakedao.sdtUtilities,token:{tokenAddress:f.stakedao.sdt,name:"SDT"}},afterPerform:C}),e.jsx(o,{})]}),e.jsx("div",{})]})]}),e.jsx("div",{className:"xl:col-6 col-12 ",children:e.jsx($e,{staking:null,type:"cvgSdt"})})]})})}function hs({mainAsset:s,cvgAsset:t}){return!s||s?.loading||!t||t?.loading?e.jsx(de,{className:"mb-6",children:e.jsxs("div",{className:"grid",children:[e.jsxs("div",{className:"col-12 flex  flex-row justify-content-between align-items-center mb-2 ",children:[e.jsxs("div",{className:"flex  align-items-start",children:[e.jsx("img",{src:De,className:" flex-grow-0 w-3rem h-3rem mr-3 hidden sm:block",alt:"cvgSDT logo"}),e.jsx("div",{className:"text-xl mt-2",children:"cvgSDT staking"})]}),e.jsx(_,{className:"w-10rem p-2"})]}),e.jsx("div",{className:"col-12",children:e.jsx(_,{className:"w-full h-3rem"})})]})}):e.jsx(fs,{mainAsset:s,cvgAsset:t})}function Ee({children:s,setIsExpanded:t,isExpanded:l}){return e.jsxs("div",{className:"cursor-pointer justify-content-between grid align-items-center",onClick:()=>{t(!l)},children:[e.jsx("div",{className:"col-12 sm:col-4 lg:col-2  ",children:e.jsx("div",{className:"flex align-items-center justify-content-between ",children:s[0]})}),e.jsx("div",{className:"col-12 sm:col-4 lg:col-1  md:align-items-center ",children:s[1]}),e.jsx("div",{className:"col-12 sm:col-4 lg:col-1 md:align-items-center ",children:s[7]}),e.jsx("div",{className:"col-12 sm:col-3 lg:col-1 ",children:s[5]}),e.jsx("div",{className:"col-12 sm:col-3 lg:col-1  flex     md:mt-0",children:s[2]}),e.jsx("div",{className:"col-12 sm:col-3 lg:col-1    ",children:s[3]}),e.jsx("div",{className:"col-12  sm:col-3 lg:col-1   flex align-items-start justify-content-between ",children:s[4]}),e.jsxs("div",{className:"lg:col-fixed mr-2",style:{width:"25px"},children:[s[6],e.jsx("span",{className:"hidden lg:block "})]})]})}function vs(){const{isExpanded:s,stakingData:t,setIsExpanded:l,optionsPos:i,logoToken:N}=a.useContext(le),{userTotals:A,stakingTotals:c,userClaimable:w,setAprsDataInDialog:b,aprsData:p,openStreamDialog:T}=a.useContext(M),{actualCycle:C}=a.useContext(Y),g=t?.mainAsset,S=t?.gaugeAsset?.tokenAddress,D=p&&p?.projectedApr&&p?.projectedApr[t?.gaugeAsset?.tokenAddress],j=p&&p?.actualsApr&&p?.actualsApr[t?.gaugeAsset?.tokenAddress],d=p&&p?.boostsData&&p?.boostsData[t?.gaugeAsset?.tokenAddress]||{};if(!t||t?.loading)return e.jsx(e.Fragment,{});let I=(i?.length||1)-1;const V=()=>e.jsxs("div",{className:"flex-wrap flex align-items-center ",children:[e.jsx("span",{className:" inline-block mx-1 color-quiet  lg:hidden",children:"Deposit:"}),I===0?"-":e.jsxs("div",{className:"flex flex-column gap-1  align-items-start",children:[e.jsxs("span",{className:"text-sm",children:["$",O(A?.contracts[t?.stakingAddress]?.amount,!1,0)," "]}),e.jsxs("span",{className:"bg-blue text-sm white-space-nowrap inline-block p-1 color-light-blue",children:[A?.contracts&&A?.contracts[t?.stakingAddress]?.count||0," Pos.(s)"]})]})]}),f=()=>e.jsxs("div",{className:"flex gap-2 align-items-center",children:[e.jsx("span",{className:" inline-block mx-1 color-quiet  lg:hidden",children:"Stream:"}),e.jsxs("div",{className:"flex flex-column gap-2",children:[e.jsxs("div",{className:"flex  gap-2 align-items-center",children:[e.jsx("img",{src:fe,alt:"stakedao",className:"w-1-5rem"}),e.jsx("i",{className:`mt-1 pi pi-backward rotate-180  ${t?.isStream?"color-green":"color-tonic"}`})]}),e.jsxs("div",{className:"flex  gap-2 align-items-center",children:[e.jsx("img",{src:ce,alt:"stakedao",className:"w-1-5rem"}),e.jsx("i",{className:`mt-1 w-1rem ${t?.isRewardProcessed?"color-green":"color-tonic"}`,children:e.jsx(Oe,{})})]})]}),e.jsxs("button",{className:"bg-none border-none",onClick:x=>{x.stopPropagation(),T(t?.isRewardProcessed,t?.isStream)},children:[e.jsx("i",{className:"pi pi-info-circle color-tonic text-base"}),e.jsx("span",{className:"p-sr-only",children:" open stream/harvest information"})]})]}),B=()=>{let x=0;return w?.contracts&&w?.contracts[t?.stakingAddress]&&(x=w?.contracts[t?.stakingAddress]?.claimable),e.jsxs("div",{className:"flex-wrap flex ",children:[e.jsx("span",{className:" inline-block mx-1 color-quiet  lg:hidden",children:"Claimable:"}),e.jsxs("span",{className:"text-sm",children:["$",O(x,!1,0)]})]})},E=()=>e.jsxs("div",{className:"flex gap-2 align-items-center",children:[e.jsx("span",{className:" inline-block mx-1 color-quiet lg:hidden",children:"Apr:"}),C>2n&&e.jsxs("div",{className:"flex flex-column",children:[e.jsx("div",{className:"p-2 text-sm bg-apr text-center",children:ae(j?.totalApr)+"%"}),e.jsxs("div",{className:"pt-2 text-xs text-center white-space-nowrap",children:["Proj: ",ae(D?.totalApr)+"%"," "]})]})||e.jsxs("div",{className:"p-2 bg-blue ",children:[ae(D?.totalApr)+"%",e.jsx("span",{className:"text-xs block",children:" Proj "})]}),e.jsx("i",{className:"pi pi-info-circle ml-2 color-tonic",onClick:x=>{x.stopPropagation(),b(S,g)}})]}),U=()=>e.jsxs("div",{className:"flex flex-wrap align-items-center",children:[e.jsx("span",{className:" inline-block mx-1 color-quiet lg:hidden",children:"Boost:"}),e.jsx("div",{children:Object.entries(d).map(([x,m])=>e.jsx("div",{className:"flex-wrap flex  align-items-center ",children:e.jsxs("div",{className:"flex text-sm white-space-nowrap align-items-center",children:[e.jsx("div",{children:x.replace("_BOOST","")}),e.jsx("div",{children:typeof m=="string"?": -":`: ${ae(m)}x`})]},x)},x))})]});return e.jsxs(Ee,{isExpanded:s,setIsExpanded:l,children:[e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex-grow-1 flex align-items-center",children:[e.jsx("img",{src:`${N}`,alt:"logo",className:"staking-asset-logo  w-3rem mr-2",title:g?.token}),e.jsxs("div",{className:" p-1 white-space-nowrap mb-1 min-w-1",children:[e.jsx("span",{className:"p-1 px-2 bg-blue",children:g?.token}),g?.sub&&e.jsx("div",{className:"text-xs mt-1 color-quiet white-space-nowrap ",children:g?.sub})]})]}),e.jsx("button",{className:"Btn Btn-nostyle md:hidden",onClick:()=>{l(!s)},children:e.jsx("i",{className:`pi  text-xl pi-chevron-${s?"up":"down"}`})})]}),e.jsx(e.Fragment,{children:e.jsx(E,{})}),e.jsx(e.Fragment,{children:e.jsx(U,{})}),e.jsx(e.Fragment,{children:e.jsx(V,{})}),e.jsx(e.Fragment,{children:e.jsx(B,{})}),e.jsxs("div",{children:[e.jsx("span",{className:" inline-block mx-1 color-quiet  lg:hidden",children:"Tvl:"}),e.jsx("span",{className:"text-sm",children:t?.stakingAddress&&c&&`$${O(c?.contracts[t?.stakingAddress]?.tvl,!1,0)}`||"-"})]}),e.jsx("button",{className:"hidden md:block Btn Btn-nostyle",onClick:()=>{l(!s)},children:e.jsx("i",{className:`pi  text-xl pi-chevron-${s?"up":"down"}`})}),f()]})}function js(){const{notifyError:s}=a.useContext(Pe),{stakingData:t,optionsPos:l,selectedPos:i,setSelectedPos:N,doStake:A,doUnStake:c,stakingAssetSelected:w,assetList:b,setStakingAssetSelected:p,getSelectedAssetInfo:T,type:C,resetViewData:g,isStakingActive:S,isUnstakingActive:D,minToken:j,weiValue:d,setWeiValue:I}=a.useContext(le),{actualCycle:V}=a.useContext(Y);if(!t||t?.loading)return e.jsx("div",{children:e.jsx(He,{})});const f=T();let E=f?.balanceOf;const U=i?.code===0?0:i?.amountBig,x=y=>{p(y),I(void 0)},m=()=>{if(!d||d<=0n){s("Invalid amount");return}return A(d)},h=()=>{if(!d||d<=0){s("Invalid amount");return}return c(d)},R=y=>e.jsxs("div",{className:"flex flex-column align-items-start p-1 px-2 gap-1",children:[e.jsx("div",{children:y.name}),e.jsxs("span",{className:`text-xs ${y.amount===0n?"inactive":""}`,children:["Av.: ",ue(y.amount,Number(f.decimals))]})]});return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"grid  align-items-start",children:[e.jsxs("div",{className:"col-12  xl:col-6 ",children:[e.jsxs("div",{className:"flex flex-column  ",children:[e.jsx("div",{className:" mb-3 sm:text-left",children:e.jsx(Re,{itemTemplate:R,unselectable:!1,className:"inline-block massive",optionLabel:"name",value:w,options:b,onChange:y=>x(y.value)})}),e.jsxs("div",{className:" flex justify-content-center sm:justify-content-start ",children:[e.jsx(re,{label:"max(stake)",setValue:()=>{I(E)},available:E}),e.jsx(re,{label:"max(unstake)",setValue:()=>{I(U)},available:U})]}),e.jsx("div",{className:"flex  flex-column md:flex-row align-items-center sm:align-items-start ",children:e.jsxs("div",{className:"mt-1 flex flex-column  md:flex-row sm:align-items-start gap-1 ",children:[e.jsx("label",{className:"p-sr-only",htmlFor:"max-buttons",children:"Staking amount"}),e.jsx(ss,{decimals:f.decimals,setWei:I,wei:d}),e.jsx("div",{children:e.jsx(Le,{itemTemplate:ge,valueTemplate:ge,className:"input w-full lg:w-10rem no-padding",value:i,disabled:!l?.length,options:l,onChange:y=>{N(y.value)},optionLabel:"name",placeholder:"Select an NFT"})})]})})]}),!!j?.display&&j?.raw>d&&e.jsxs("div",{className:"text-sm text-left mt-2",children:[e.jsx("span",{className:"color-quiet",children:" min token:"})," ",O(j?.display)]}),e.jsxs("div",{className:"mt-4 text-center justify-content-center sm:justify-content-start flex align-items-center flex-wrap sm:text-left  ",children:[e.jsx(ne,{processKey:"staking.deposit",allowanceDefinition:{contract:f.stakeAllowanceAddress,token:f},value:G(d,f?.decimals),valueRaw:d,label:"Stake",params:{asset:f?.name,tokenId:i?.code,cycle:Number(V)+2},perform:m,afterPerform:()=>g(f.tokenAddress,t),disabled:!S?.active,errors:S?.errors}),e.jsx(ne,{processKey:"staking.withdraw",value:G(d,f?.decimals),valueRaw:d,disabled:!D?.active,errors:D?.errors,label:"Unstake",params:{asset:t?.gaugeAsset?.token,tokenId:i?.code},perform:h,afterPerform:()=>g(t?.gaugeAsset?.tokenAddress,t)}),t?.asset?.tokenAddress?e.jsxs("a",{href:`https://swap.defillama.com/?chain=ethereum&from=0x0000000000000000000000000000000000000000&to=${t?.asset?.tokenAddress}`,target:"_blank",rel:"noreferrer",className:"sm:ml-2 p-2 no-underline color-tonic border-tonic border-1 inline-flex align-items-center gap-2",children:[e.jsx("i",{className:"pi pi-caret-right"}),"Buy on Defillama"]}):e.jsxs("a",{href:t?.curveDepositUrl,target:"_blank",rel:"noreferrer",className:"sm:ml-2 p-2 no-underline color-tonic border-tonic border-1 inline-flex align-items-center gap-2",children:[e.jsx("i",{className:"pi pi-caret-right"}),"Buy on Curve"]})]})]}),e.jsx("div",{className:"col-12 xl:col-6",children:e.jsx($e,{staking:t,type:C})})]})})}function ye(){const{isExpanded:s}=a.useContext(le);return e.jsxs("div",{className:"border-quiet p-1 pt-3 pb-1 border-top-1",children:[e.jsx(vs,{}),e.jsx("div",{className:"w-full pt-5 fadein text-center",hidden:!s,children:e.jsx(js,{})})]})}function bs(){const{filter:s,updateFilter:t}=a.useContext(me),{displayFilter:l}=a.useContext(M);return l?e.jsxs("span",{className:"p-input-icon-left lg:mr-5 flex align-items-center gap-2 ",children:["Filter by URL :"," ",e.jsxs("a",{href:"/stake/sdt",className:"inline-flex align-items-center gap-1 no-underline color-light-blue ",children:[e.jsx("i",{className:"pi pi-delete-left"}),e.jsx("span",{children:" Clear filter"})]})]}):e.jsxs("span",{className:"p-input-icon-left lg:mr-5 ",children:[e.jsx("i",{className:"pi pi-search  color-white"}),e.jsx(Ze,{type:"search",className:"quiet-input lg:min-w-30rem w-full",value:s?.keyword,onChange:i=>{t("keyword",i.target.value)},placeholder:"Search by name, address ..."})]})}function As(){const{streamDialogVisible:s,setStreamDialogVisible:t,isRewardProcessed:l,isRewardStreamed:i}=a.useContext(M);return e.jsx(Ie,{header:e.jsx("div",{className:"flex align-items-center gap-3  p-2 mb-4",children:e.jsx("div",{children:"Staking rewards streaming"})}),closable:!0,visible:s,style:{width:"100%",maxWidth:"45rem"},dismissableMask:!1,onHide:()=>{t(!1)},children:e.jsx(Ve,{children:e.jsxs("div",{className:"flex flex-column gap-3 w-full ",children:[e.jsxs("div",{className:" flex gap-2 align-items-center ",children:[e.jsx("img",{src:fe,alt:"stakedao",className:"w-2rem"}),e.jsx("i",{className:`mt-1 pi pi-backward rotate-180  ${i?"color-green":"color-tonic"}`}),i?e.jsx("div",{children:" SDT & CRV rewards are streaming."}):e.jsxs("div",{children:[" ","SDT & CRV rewards are not streaming.",e.jsx("br",{}),"You can process the stream at"," ",e.jsx("a",{className:"color-light-blue",href:"https://www.stakedao.org/manage",target:"_blank",rel:"noreferrer",children:"https://www.stakedao.org/manage"}),"."]})]}),e.jsxs("div",{className:" flex gap-2 align-items-center ",children:[e.jsx("img",{src:ce,alt:"stakedao",className:"w-2rem"}),e.jsx("i",{className:`mt-1 w-1rem ${l?"color-green":"color-tonic"}`,children:e.jsx(Oe,{})}),l?e.jsx("div",{children:" SDT & CRV rewards have been harvested."}):e.jsxs("div",{children:["SDT & CRV rewards have not been harvested.",e.jsx("br",{})," Harvest at"," ",e.jsx("a",{className:"color-light-blue",href:"https://app.cvg.finance/sdt-harvest",target:"_blank",rel:"noreferrer",children:"https://app.cvg.finance/sdt-harvest"}),"."]})]})]})})})}function Ss(){const{StakingsDisplayList:s,filter:t,updateFilter:l}=a.useContext(me),{userTotals:i,stakingTotals:N,userClaimable:A}=a.useContext(M),c=()=>e.jsx("div",{className:"hidden lg:block",children:e.jsxs(Ee,{isExpanded:!1,setIsExpanded:()=>{},children:[e.jsx(ee,{field:"token",filter:t,onSort:()=>l("sort","token"),label:"Token"}),e.jsx(ee,{field:"apr",filter:t,onSort:()=>l("sort","apr"),label:"vAPR"}),e.jsx(ee,{field:"boost",filter:t,onSort:()=>l("sort","boost"),label:"Boost"}),e.jsx(ee,{field:"userDeposit",filter:t,onSort:()=>l("sort","userDeposit"),label:"Deposits"}),e.jsx(ee,{field:"userClaimable",filter:t,onSort:()=>l("sort","userClaimable"),label:"Claimable"}),e.jsx(ee,{field:"tvl",filter:t,onSort:()=>l("sort","tvl"),label:"TVL"}),e.jsx("span",{className:"p-sr-only",children:"toggle"}),e.jsx(ee,{field:"stream",label:"Stream"})]})});return e.jsxs(de,{children:[e.jsxs("div",{className:"flex flex-column md:flex-row align-items-start w-full  justify-content-between gap-2 ",children:[e.jsx("div",{className:" w-fit flex align-items-center  text-xl ",children:" sdTOKENS & LPs staking"}),e.jsxs("span",{children:[e.jsx("span",{className:"color-tonic",children:"Deposits:"}),e.jsxs("span",{className:"text-sm",children:[" $",O(i?.sd?.amount+i?.lp?.amount)," "]}),e.jsxs("div",{className:"bg-blue text-xs white-space-nowrap w-fit  p-1 color-light-blue",children:[i?.sd.count+i?.lp?.count||"0"," Position(s)"]})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("span",{className:"color-tonic",children:"Claimable:"}),e.jsxs("span",{className:"text-sm",children:["$",O(A?.sd?.claimable+A?.lp?.claimable)]})]}),e.jsx("div",{className:"flex gap-1 align-items-center",children:e.jsx("div",{children:e.jsxs("div",{className:"bg-apr p-1",children:["TVL:",e.jsx("span",{className:"text-sm",children:N&&`$${O(N?.sd?.tvl+N?.lp?.tvl)}`||"-"})]})})})]}),e.jsx("div",{className:"pt-5 pb-2",children:e.jsx(bs,{})}),e.jsxs("div",{className:"flex flex-column gap-6 mt-5",children:[s?.sdAssets&&Object.values(s.sdAssets)?.length>0&&e.jsxs(pe,{legend:"Boosted sdTOKENS ",className:"p-1",legendClassName:"bg-blue mb-2",children:[e.jsx("div",{className:"hidden lg:block",children:e.jsx(c,{})}),Object.values(s.sdAssets).map(w=>e.jsx("div",{children:e.jsx(Ce,{stakingData:w,type:"sd",children:e.jsx(ye,{})})},w.stakingAddress))]}),s?.lps&&Object.values(s.lps)?.length>0&&e.jsxs(pe,{legendClassName:"bg-blue  mb-2",className:"p-1",legend:"Boosted LPs",children:[e.jsx("div",{className:"hidden lg:block",children:e.jsx(c,{})}),Object.values(s.lps).map(w=>e.jsx("div",{children:e.jsx(Ce,{stakingData:w,type:"lp",children:e.jsx(ye,{})})},w.stakingAddress))]})]}),e.jsx(As,{})]})}function ks(){const{stakings:s}=a.useContext(me);return!s||s.loading?e.jsxs(de,{children:[e.jsxs("div",{className:"flex flex-column md:flex-row  align-items-center w-full  justify-content-between gap-5",children:[e.jsx("div",{className:"flex text-xl ",children:" sdTOKENS & LPs staking"}),e.jsx("div",{children:e.jsx(_,{className:"w-10rem p-2"})})]}),e.jsxs("div",{className:"flex flex-column gap-6 mt-5 xl:h-30rem",children:[e.jsx(pe,{legend:"Boosted sdTOKENS",className:"p-1 py-2",legendClassName:"bg-blue mb-2",children:e.jsx(_,{className:"w-full h-3rem p-2"})}),e.jsx(pe,{legendClassName:"bg-blue  mb-2 py-2",className:"p-1 py-2",legend:"Boosted LPs",children:e.jsx(_,{className:"w-full h-3rem p-2"})})]})]}):e.jsx(Ss,{})}function Ns(){const{aprDialogData:s,closeAprPopup:t}=a.useContext(M);return s?e.jsx(Ie,{header:e.jsxs("div",{className:"flex align-items-center gap-3  p-2",children:[e.jsx("img",{src:s.logoHeaderUrl,alt:s.headerName,style:{width:"2.5rem"}}),e.jsxs("div",{children:[s.headerName," staking rewards"]})]}),closable:!0,visible:s?.isVisible,style:{width:"100%",maxWidth:"45rem"},dismissableMask:!1,onHide:()=>{t()},children:e.jsxs(Ve,{children:[e.jsx("div",{className:"p-2",children:s?.isVisible&&e.jsxs("div",{className:"px-3",children:[e.jsxs("div",{className:"flex gap-2 justify-content-between align-items-center pb-2 mb-2 border-bottom-1 border-quiet",children:[e.jsx("span",{className:"text-xl",children:"Projected vAPR"}),e.jsxs("div",{className:"p-2 text-lg bg-blue ",children:[O(s.projectedApr.total,!1,2),"%"]})]}),e.jsx("p",{className:"color-quiet my-2",children:"This is the vAPR that all stakers will eventually get, if all parameters remain the same (TVL, and gauge weights on Curve, Stake DAO and Convergence)."}),e.jsx("div",{children:e.jsxs("div",{className:"flex flex-column gap-2 pb-2",children:[e.jsxs("div",{className:" hidden md:flex gap-2 flex-wrap align-items-center border-bottom-1 border-quiet  pb-2 w-full",children:[e.jsx("div",{className:"w-12rem color-quiet text-sm",children:"Token"}),e.jsx("div",{className:"w-18rem color-quiet text-sm",children:"Apr %"})]}),s.projectedApr.list.map(l=>e.jsxs("div",{className:"flex gap-2 flex-wrap align-items-center border-bottom-1 border-quiet  pb-2 w-full",children:[e.jsxs("div",{className:"flex align-items-center gap-2 w-12rem ",children:[e.jsx("img",{src:l.logoUrl,alt:l.aprKeyDisplayed,style:{width:"1.5rem"}}),e.jsx("div",{className:"bg-blue p-1 px-2 ",children:l.aprKeyDisplayed})]}),e.jsx("div",{className:"w-18rem",children:e.jsx(ke,{display:O(l.value,!1,2),percent:l.percent,color:"#ff0",labelWidthClass:"w-5rem"})})]},l.aprKeyDisplayed))]})})]})}),e.jsx("div",{className:"px-2",children:s?.isVisible&&s.aprActual?.total&&e.jsxs("div",{className:"p-3",children:[e.jsxs("div",{className:"flex gap-2 justify-content-between align-items-center pb-2 mb-2 border-bottom-1 border-quiet",children:[e.jsx("span",{className:"text-xl",children:"Actual vAPR"}),e.jsxs("div",{className:"p-2 text-lg bg-blue ",children:[O(s.aprActual.total,!1,2),"%"]})]}),e.jsxs("div",{className:"color-quiet my-2",children:["This is the vAPR that eligible stakers are currently getting. Learn more on the Cycle mechanics here:"," ",e.jsx("a",{className:"color-light-blue",href:"https://docs.cvg.finance/rewards/stake-dao-rewards",target:"_blank",rel:"noreferrer",children:"stake-dao-rewards"}),", and here:"," ",e.jsx("a",{className:"color-light-blue",href:"https://docs.cvg.finance/rewards/cvg-rewards",target:"_blank",rel:"noreferrer",children:"cvg-rewards"}),"."]}),e.jsx("div",{children:e.jsxs("div",{className:"flex flex-column gap-2 pb-2",children:[e.jsxs("div",{className:" hidden md:flex gap-2 flex-wrap align-items-center border-bottom-1 border-quiet  pb-2 w-full",children:[e.jsx("div",{className:"w-12rem color-quiet text-sm",children:"Token"}),e.jsx("div",{className:"w-18rem color-quiet text-sm",children:"Apr %"})]}),s.aprActual.list.map(l=>e.jsxs("div",{className:"flex gap-2 flex-wrap align-items-center border-bottom-1 border-quiet  pb-2 w-full",children:[e.jsxs("div",{className:"flex align-items-center gap-2 w-12rem ",children:[e.jsx("img",{src:l.logoUrl,alt:l.aprKeyDisplayed,style:{width:"1.5rem"}}),e.jsx("div",{className:"bg-blue p-1 px-2 ",children:l.aprKeyDisplayed})]}),e.jsx("div",{className:"w-18rem",children:e.jsx(ke,{display:O(l.value,!1,2),percent:l.percent,color:"#ff0",labelWidthClass:"w-5rem"})})]},l.aprKeyDisplayed))]})})]})})]})}):""}function ws(){const{displayFilter:s,globalData:t}=a.useContext(M);return t&&t.error?e.jsx(de,{children:e.jsx(ze,{})}):e.jsxs(e.Fragment,{children:[e.jsx(Ns,{}),(!s||s==="cvgsdt")&&e.jsx(ls,{cvgTokenData:t?.cvgSdt,children:e.jsx(hs,{cvgAsset:t?.cvgSdt?.cvgAsset,mainAsset:t?.cvgSdt?.mainAsset})}),e.jsx(rs,{stakings:t?.stakings,utilities:t?.utilities,children:e.jsx(ks,{})})]})}function Cs(){const{nextDistributionDurations:s,actualCycle:t}=a.useContext(Y),{userTotals:l,userClaimable:i}=a.useContext(M),{isWellConnected:N}=ie(),A=()=>N?l===void 0||i===void 0?e.jsxs(he,{children:[[0,0,0].map((c,w)=>e.jsx(_,{className:"w-10rem p-1 m-1"},w)),e.jsx("div",{className:"mt-2",children:e.jsx("a",{href:"/sdt-harvest",className:"Btn no-underline color-tonic ",children:"Harvest staking rewards"})})]}):e.jsxs(he,{children:[e.jsx(te,{label:"cvgSDT staked",value:`$${O(l?.cvgSdt?.amount)}`,className:"is-highlight"}),e.jsx(te,{label:"sdTKN and LP staked",value:`$${O(l?.sd?.amount+l?.lp?.amount)}`,className:"is-highlight"}),e.jsx(te,{label:"Claimable",value:`$${O(i?.total?.claimable)}`,className:"is-highlight"}),e.jsx("div",{className:"mt-2",children:e.jsx("a",{href:"/sdt-harvest",className:"Btn no-underline color-tonic ",children:"Harvest staking reward"})})]}):e.jsx(e.Fragment,{children:e.jsx(Ke,{})});return e.jsxs(ts,{children:[e.jsxs(he,{children:[e.jsx(as,{title:"Staking info",children:e.jsxs(e.Fragment,{children:["Deposit cvgSDT, Stake DAO’s sdTOKENS, or Curve LP tokens to earn boosted native rewards, plus"," ",e.jsx("span",{className:"color-tonic",children:"CVG"})," emissions according to Convergence’s gauges weights.",e.jsx("br",{}),e.jsx("br",{}),"Staked positions are represented by NFTs."]})}),e.jsx(te,{label:"Current Cycle",value:Number(t),className:"is-highlight"}),e.jsx(te,{label:"Next CVG rewards",value:s?.data?.durationNextCvg,className:"is-highlight"}),e.jsx(te,{label:"Next TDE",value:s?.data?.durationNextTde,className:"is-highlight"})]}),e.jsx(A,{})]})}function Xs(){const t=new URLSearchParams(window?.location?.search).get("filter")?.toLowerCase();return e.jsx("main",{className:" flex justify-content-center",children:e.jsx(Ye,{children:e.jsxs(ns,{displayFilter:t,children:[e.jsx(Cs,{}),e.jsx("div",{className:" flex justify-content-center",children:e.jsx("div",{className:"w-12",children:e.jsx(ws,{displayFilter:t})})})]})})})}export{Xs as default};
